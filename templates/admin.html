{% extends "base.html" %}

{% block content %}
<div class="admin-panel" style="display: flex; gap: 40px; justify-content: space-between;">

  <!-- Pending Users -->
  <div style="width: 45%;">
    <h2>Pending User Approvals</h2>
    {% if pending_users %}
      <table>
        <thead>
          <tr><th>Email</th><th>Role</th><th>Actions</th></tr>
        </thead>
        <tbody>
          {% for user in pending_users %}
            <tr>
              <td>{{ user.username }}</td>
              <td>{{ user.role }}</td>
              <td>
                <form method="POST" style="display:inline;">
                  <input type="hidden" name="user_email" value="{{ user.username }}">
                  <input type="hidden" name="item_type" value="user">
                  <button type="submit" name="action" value="approve">Approve</button>
                  <button type="submit" name="action" value="reject">Reject</button>
                </form>
              </td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    {% else %}
      <p>No pending users.</p>
    {% endif %}
  </div>

  <!-- Pending Residencies -->
  <div style="width: 45%;">
    <h2>Pending Residency Postings</h2>
    {% if pending_positions %}
      <table>
        <thead>
          <tr><th>Title</th><th>Company</th><th>Actions</th></tr>
        </thead>
        <tbody>
          {% for position in pending_positions %}
            <tr>
              <td>{{ position.title }}</td>
              <td>{{ position.company.name }}</td>
              <td>
                <form method="POST" style="display:inline;">
                  <input type="hidden" name="position_id" value="{{ position.id }}">
                  <input type="hidden" name="item_type" value="residency">
                  <button type="submit" name="action" value="approve">Approve</button>
                  <button type="submit" name="action" value="reject">Reject</button>
                </form>
              </td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    {% else %}
      <p>No pending residencies.</p>
    {% endif %}
  </div>

</div>

<!-- Flash Messages -->
{% with messages = get_flashed_messages() %}
  {% if messages %}
    <ul class="flash-messages">
      {% for message in messages %}
        <li>{{ message }}</li>
      {% endfor %}
    </ul>
  {% endif %}
{% endwith %}

{% endblock %}
